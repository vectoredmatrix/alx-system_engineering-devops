#!/bin/bash

WATER_BASE="water"
STIR_BASE="stir"
TARGET_BASE="bestchol"

# Function to get 0-based index of a char in a base
index_in_base() {
    local char=$1 base=$2
    echo $(( $(expr index "$base" "$char") - 1 ))
}

# Function to sum two strings character by character
sum_strings() {
    local a=$1 b=$2 base_a=$3 base_b=$4 target_base=$5
    local len=${#a}
    local result=""
    for ((i=0;i<len;i++)); do
        ia=$(index_in_base "${a:i:1}" "$base_a")
        ib=$(index_in_base "${b:i:1}" "$base_b")
        len_target=${#target_base}
        ic=$(( (ia + ib) % len_target ))
        result+=${target_base:ic:1}
    done
    echo "$result"
}

# Example usage
sum_strings "$WATER" "$STIR" "$WATER_BASE" "$STIR_BASE" "$TARGET_BASE"
