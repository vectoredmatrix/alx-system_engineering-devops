#!/bin/bash
WATER_BASE="water"
STIR_BASE="stir"
TARGET_BASE="bestchol"

# Convert custom base string to decimal
to_decimal() {
  local num=$1 base=$2 dec=0 i val
  for ((i=0;i<${#num};i++)); do
    val=$(expr index "$base" "${num:i:1}")
    dec=$(( dec * ${#base} + val - 1 ))
  done
  echo "$dec"
}

# Convert decimal to custom base string
from_decimal() {
  local num=$1 base=$2 out=""
  if (( num == 0 )); then echo "${base:0:1}"; return; fi
  while (( num > 0 )); do
    out="${base:num % ${#base}:1}$out"
    (( num /= ${#base} ))
  done
  echo "$out"
}

# Add numbers and print in target base
sum=$(( $(to_decimal "$WATER" "$WATER_BASE") + $(to_decimal "$STIR" "$STIR_BASE") ))
from_decimal "$sum" "$TARGET_BASE"
